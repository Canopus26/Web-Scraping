import requests
from bs4 import BeautifulSoup
from datetime import datetime, timedelta

# Function to scrape news from a given URL
def scrape_news(url):
    response = requests.get(url)
    soup = BeautifulSoup(response.content, 'html.parser')
    text = ''
    for paragraph in soup.find_all('p'):
        text += paragraph.get_text() + ' '
    return text.strip()

# Function to search for news articles mentioning RIL
def search_news(query):
    url = f'https://www.bing.com/news/search?q={query}&qft=sortbydate%3d"Day"%26form%3dQBNH'
    response = requests.get(url)
    soup = BeautifulSoup(response.content, 'html.parser')
    news_articles = []
    for item in soup.find_all('a', {'class': 'title'}):
        news_articles.append(item['href'])
    return news_articles

# Get current date and time
now = datetime.now()

# Calculate 24 hours ago
twenty_four_hours_ago = now - timedelta(hours=24)

# URLs to scrape news from
urls = [
    'https://www.moneycontrol.com/news/business/markets/explained-why-reliance-industries-shares-are-under-pressure-8918541.html',
    'https://www.livemint.com/companies/news/reliance-industries-share-price-today-ril-stocks-trade-flat-after-q4-results-all-you-need-to-know-11652995166228.html',
    'https://www.businesstoday.in/latest/corporate/story/ril-gains-3-percent-after-plans-to-set-up-digital-units-339163-2023-04-25',
    'https://www.ndtv.com/business/ril-shares-gain-on-buyback-buzz-3230250']

# List to store scraped data
scraped_data = []

# Scrape news from URLs
for url in urls:
    news_text = scrape_news(url)
    scraped_data.append({'source': url, 'text': news_text})

# Search for news articles mentioning RIL
news_articles = search_news('Reliance Industries Ltd.')

# Scrape news from search results
for article_url in news_articles:
    news_text = scrape_news(article_url)
    scraped_data.append({'source': article_url, 'text': news_text})

# Print scraped data
for data in scraped_data:
    print(data)
